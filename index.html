<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ද්විමය සංඛ්‍යා පැවරුම</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            animation: bgAnim 5s ease-in-out infinite alternate;
        }

        @keyframes bgAnim {
            0% { background: linear-gradient(120deg, #d1c4e9, #ffccbc); }
            50% { background: linear-gradient(120deg, #b2dfdb, #ffe082); }
            100% { background: linear-gradient(120deg, #c8e6c9, #f48fb1); }
        }

        .quiz-container {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
            max-width: 700px;
            width: 100%;
            perspective: 1000px;
        }

        h1 {
            text-align: center;
            color: #4a148c;
        }

        .progress-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-container {
            background: #b2dfdb;
            height: 25px;
            border-radius: 20px;
            overflow: hidden;
            flex: 1;
            margin-right: 10px;
            box-shadow: inset 0 4px 6px rgba(0,0,0,0.2), 0 4px 6px rgba(0,0,0,0.1);
            perspective: 500px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(270deg, #00796b, #26a69a, #004d40, #26a69a);
            background-size: 800% 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            transform-style: preserve-3d;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: flow 4s linear infinite;
        }

        @keyframes flow {
            0% { background-position: 0% 0; }
            50% { background-position: 100% 0; }
            100% { background-position: 0% 0; }
        }

        #scoreDisplay {
            font-weight: bold;
            color: #004d40;
            min-width: 50px;
            text-align: right;
        }

        .question {
            margin-bottom: 20px;
            font-size: 1.2em;
            color: #311b92;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .answer-btn {
            padding: 12px;
            font-size: 1em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            background: linear-gradient(145deg, #ff8a65, #ff7043);
            color: #fff;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform-style: preserve-3d;
        }

        .answer-btn:hover {
            transform: translateY(-5px) rotateX(10deg) rotateY(10deg) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .answer-btn.correct {
            background: #4caf50 !important;
        }

        .answer-btn.wrong {
            background: #f44336 !important;
        }

        #result {
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 20px;
            text-align: left;
            color: #311b92;
        }

        #questionRemaining {
            margin-bottom: 10px;
            font-weight: bold;
            color: #004d40;
        }
    </style>
</head>
<body>
<div class="quiz-container">
    <h1>ද්විමය සංඛ්‍යා පැවරුම</h1>
    <div class="progress-wrapper">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div id="scoreDisplay">ලකුණු: 0</div>
    </div>
    <div id="questionRemaining">ප්‍රශ්නය 1/20</div>
    <div id="quiz">
        <div class="question" id="questionText"></div>
        <div class="answers" id="answerButtons"></div>
    </div>
    <div id="result"></div>
</div>

<script>
    const quizData = [
      {
        question: "දහයේ පාදයේ 9, දෙකේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["1010", "1100", "1001", "1000"],
        correctAnswer: "1001"
      },
      {
        question: "දෙකේ පාදයේ 1101, දහයේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["11", "12", "13", "14"],
        correctAnswer: "13"
      },
      {
        question: "$101_{දෙක} + 10_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["110", "1010", "111", "100"],
        correctAnswer: "111"
      },
      {
        question: "$110_{දෙක} - 1_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["100", "101", "111", "10"],
        correctAnswer: "101"
      },
      {
        question: "දහයේ පාදයේ 20, දෙකේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["10010", "1010", "10100", "11000"],
        correctAnswer: "10100"
      },
      {
        question: "දෙකේ පාදයේ 11111, දහයේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["32", "31", "15", "21"],
        correctAnswer: "31"
      },
      {
        question: "$111_{දෙක} + 101_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["1010", "1000", "1100", "1011"],
        correctAnswer: "1100"
      },
      {
        question: "දහයේ පාදයේ 43, දෙකේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["110101", "101011", "101101", "101010"],
        correctAnswer: "101011"
      },
      {
        question: "දෙකේ පාදයේ 100111, දහයේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["35", "49", "39", "55"],
        correctAnswer: "39"
      },
      {
        question: "$1101_{දෙක} - 111_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["100", "11", "110", "1010"],
        correctAnswer: "110"
      },
      {
        question: "ද්විමය සංඛ්‍යා පද්ධතියේ භාවිත වන මූලික සංඛ්‍යාංක මොනවාද?",
        answerOptions: ["0 සිට 9 දක්වා", "1 සහ 2", "0 සහ 1", "A සහ B"],
        correctAnswer: "0 සහ 1"
      },
      {
        question: "දහයේ පාදයේ 52, දෙකේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["101100", "110010", "110100", "110101"],
        correctAnswer: "110100"
      },
      {
        question: "දෙකේ පාදයේ 111000, දහයේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["28", "56", "60", "52"],
        correctAnswer: "56"
      },
      {
        question: "$11101_{දෙක} + 1110_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["101111", "101011", "100111", "101001"],
        correctAnswer: "101011"
      },
      {
        question: "$10001_{දෙක} - 111_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["1000", "1010", "1100", "1110"],
        correctAnswer: "1010"
      },
      {
        question: "දහයේ පාදයේ 97, දෙකේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["1010001", "1100001", "1100011", "1101001"],
        correctAnswer: "1100001"
      },
      {
        question: "දෙකේ පාදයේ 110001, දහයේ පාදයෙන් කොපමණ ද?",
        answerOptions: ["48", "49", "51", "33"],
        correctAnswer: "49"
      },
      {
        question: "$11011_{දෙක} + 11_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["11100", "11110", "100010", "11101"],
        correctAnswer: "11110"
      },
      {
        question: "$1100_{දෙක} - 111_{දෙක}$ හි අගය කොපමණ ද?",
        answerOptions: ["100", "11", "101", "1"],
        correctAnswer: "101"
      },
      {
        question: "දහයේ පාදයේ 32, දෙකේ පාදයෙන් දැක්වූ විට 1 ට පසුව බිංදු කීයක් තිබේද?",
        answerOptions: ["4", "5", "6", "1"],
        correctAnswer: "5"
      }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    const answeredQuestions = [];

    const questionText = document.getElementById("questionText");
    const answerButtons = document.getElementById("answerButtons");
    const resultDiv = document.getElementById("result");
    const progressBar = document.getElementById("progressBar");
    const questionRemaining = document.getElementById("questionRemaining");
    const scoreDisplay = document.getElementById("scoreDisplay");

    function showQuestion() {
        const currentQuestion = quizData[currentQuestionIndex];
        questionText.textContent = currentQuestion.question;
        answerButtons.innerHTML = "";
        
        // Shuffle the answer options to prevent memorization
        const shuffledOptions = [...currentQuestion.answerOptions].sort(() => Math.random() - 0.5);

        shuffledOptions.forEach(option => {
            const button = document.createElement("button");
            button.textContent = option;
            button.classList.add("answer-btn");
            button.addEventListener("click", () => checkAnswer(option, currentQuestion.correctAnswer, button));
            answerButtons.appendChild(button);
        });

        questionRemaining.textContent = `ප්‍රශ්නය ${currentQuestionIndex + 1}/${quizData.length}`;
        progressBar.style.width = `${(currentQuestionIndex / quizData.length) * 100}%`;
    }

    function checkAnswer(selectedOption, correctAnswer, clickedButton) {
        let isCorrect = selectedOption === correctAnswer;
        
        answeredQuestions.push({
            question: quizData[currentQuestionIndex].question,
            correctAnswer: correctAnswer,
            userAnswer: selectedOption,
            userIsCorrect: isCorrect
        });

        Array.from(answerButtons.children).forEach(button => {
            button.disabled = true;
            if (button.textContent === correctAnswer) {
                button.classList.add("correct");
            } else if (button.textContent === selectedOption) {
                button.classList.add("wrong");
            }
        });

        if (isCorrect) {
            score++;
            scoreDisplay.textContent = `ලකුණු: ${score}`;
        }
        
        setTimeout(() => {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                showQuestion();
            } else {
                showResult();
            }
        }, 1500); // Wait for 1.5 seconds before moving to the next question
    }

    function showResult() {
        progressBar.style.width = "100%";
        questionText.style.display = "none";
        answerButtons.style.display = "none";
        questionRemaining.style.display = "none";

        let resultHtml = `<h2>ප්‍රශ්නාවලිය අවසන්!</h2>`;
        resultHtml += `<h3>ඔබ ලබා ගත් ලකුණු: ${score} / ${quizData.length}</h3>`;
        resultHtml += `<h4>ඔබේ පිළිතුරු සමාලෝචනය:</h4>`;
        resultHtml += `<ul>`;

        answeredQuestions.forEach((ans, index) => {
            const status = ans.userIsCorrect ? "✅" : "❌";
            const userChoiceClass = ans.userIsCorrect ? "correct" : "wrong";

            resultHtml += `<li>
                <p><strong>${index + 1}. ${ans.question}</strong></p>
                <p>ඔබේ පිළිතුර: <span class="${userChoiceClass}">${ans.userAnswer}</span></p>
                <p>නිවැරදි පිළිතුර: <span class="correct">${ans.correctAnswer}</span></p>
                <hr>
            </li>`;
        });
        
        resultHtml += `</ul>`;
        resultDiv.innerHTML = resultHtml;

        // Reset the score and index for a new quiz
        score = 0;
        currentQuestionIndex = 0;
    }

    showQuestion();
</script>
</body>
</html>
