<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∂ú‡∂´‡∑í‡∂≠ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Animation for wrong answer (shake effect) */
        @keyframes wrong-answer {
            0% { transform: translateX(0); }
            20% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            60% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }

        /* Animation for a smooth transition of the puzzle grid */
        @keyframes slide-in-right {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .selected-button {
            background-color: #2196F3 !important;
            color: white !important;
        }

        .wrong-animation {
            animation: wrong-answer 0.5s ease-in-out;
        }

        .slide-in-animation {
            animation: slide-in-right 0.8s ease-in-out forwards;
        }

        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- Game container with a modern, clean design -->
    <div id="game-container" class="bg-white rounded-xl shadow-lg p-8 w-full max-w-xl flex flex-col items-center text-center fade-in">
        <h1 class="text-4xl font-bold text-gray-800 mb-6">‡∂ú‡∂´‡∑í‡∂≠ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä - ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ñ‡∑ö‡∂Ω‡∑í‡∂ö‡∑è</h1>

        <!-- Puzzle description and target -->
        <div id="puzzle-info" class="w-full bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
            <p class="text-xl text-gray-700 mb-2">‡∂¥‡∑Ñ‡∂≠ ‡∂ú‡∑ä‚Äç‡∂ª‡∑í‡∂©‡∑ä ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î‡∑Ä <span id="target-number" class="font-extrabold text-blue-600">0</span> ‡∂ß ‡∑É‡∂∏‡∑è‡∂± ‡∑Ä‡∂± ‡∂Ö‡∂Ç‡∂ö ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂±‡∑ä‡∂±.</p>
            <p class="text-lg text-gray-600 font-semibold mt-2">‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î: <span id="wrong-answers-count">0</span></p>
        </div>

        <!-- Puzzle grid -->
        <div id="puzzle-grid" class="grid grid-cols-4 gap-4 w-full">
            <!-- Grid buttons are dynamically created via JavaScript -->
        </div>

        <!-- Action buttons and feedback -->
        <div class="mt-6 w-full flex flex-col items-center gap-4">
            <p id="result" class="text-2xl font-semibold"></p>
            <button id="check-button" class="w-full px-6 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300">
                ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
            </button>
        </div>
    </div>

    <!-- Modal for game over -->
    <div id="game-over-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-xl p-8 text-center max-w-sm w-full fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä!</h2>
            <p class="text-xl text-gray-700 mb-2">‡∂î‡∂∂‡∑ö ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂Ω‡∂ö‡∑î‡∂´‡∑î: <span id="final-score" class="font-extrabold text-blue-600">0</span></p>
            <p class="text-sm text-gray-500">‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∂ö‡∂ß ‡∂Ω‡∂ö‡∑î‡∂´‡∑î 10‡∂∫‡∑í. ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∂ö‡∂ß ‡∂Ω‡∂ö‡∑î‡∂´‡∑î 2‡∂ö‡∑ä ‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ö.</p>
            <button onclick="location.reload()" class="mt-6 px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors duration-300">
                ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
            </button>
        </div>
    </div>

    <script>
        // Array of puzzle data. Each object contains a target number and a grid of numbers.
        const puzzles = [
            {
                target: 15,
                grid: [2, 5, 8, 1, 9, 3, 7, 6, 4, 11, 10, 12, 13, 14, 15, 0]
            },
            {
                target: 20,
                grid: [10, 5, 2, 8, 1, 15, 7, 13, 12, 6, 9, 11, 4, 16, 17, 3]
            },
            {
                target: 18,
                grid: [1, 5, 12, 8, 6, 10, 2, 16, 3, 15, 11, 7, 4, 14, 9, 13]
            }
        ];

        let currentPuzzleIndex = 0;
        let selectedNumbers = [];
        let score = 0;
        let wrongAnswers = 0;

        // Function to load the current puzzle into the UI with animation.
        function loadPuzzle() {
            const puzzleGrid = document.getElementById('puzzle-grid');
            
            // First, hide the current puzzle content
            puzzleGrid.innerHTML = '';
            
            const currentPuzzle = puzzles[currentPuzzleIndex];
            document.getElementById('target-number').textContent = currentPuzzle.target;
            document.getElementById('result').textContent = '';
            selectedNumbers = [];

            // Add the slide-in animation class
            puzzleGrid.classList.add('slide-in-animation');

            currentPuzzle.grid.forEach((number, index) => {
                const button = document.createElement('button');
                button.textContent = number;
                button.className = "w-full aspect-square px-2 py-2 bg-gray-200 text-gray-800 font-bold rounded-lg shadow-sm hover:bg-blue-400 hover:text-white transition-colors duration-300";
                button.onclick = () => selectNumber(button, number);
                button.setAttribute('data-index', index);
                puzzleGrid.appendChild(button);
            });

            // Remove the animation class once the animation is complete
            puzzleGrid.addEventListener('animationend', () => {
                puzzleGrid.classList.remove('slide-in-animation');
            }, { once: true });
        }

        // Function to handle number selection.
        function selectNumber(button, number) {
            const index = selectedNumbers.indexOf(number);
            if (index > -1) {
                // Number is already selected, un-select it
                selectedNumbers.splice(index, 1);
                button.classList.remove('selected-button');
            } else {
                // Number is not selected, select it
                selectedNumbers.push(number);
                button.classList.add('selected-button');
            }
        }

        // Event listener for the check button.
        document.getElementById('check-button').addEventListener('click', () => {
            const currentPuzzle = puzzles[currentPuzzleIndex];
            const resultElement = document.getElementById('result');
            const allButtons = document.querySelectorAll('#puzzle-grid button');
            const currentSum = selectedNumbers.reduce((sum, num) => sum + num, 0);

            if (currentSum === currentPuzzle.target) {
                resultElement.textContent = "‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! üéâ";
                resultElement.style.color = "green";
                score += 10;
                
                // Disable buttons to prevent further selection
                allButtons.forEach(btn => btn.disabled = true);

                // Move to the next puzzle after a short delay
                setTimeout(() => {
                    currentPuzzleIndex++;
                    if (currentPuzzleIndex < puzzles.length) {
                        loadPuzzle();
                    } else {
                        // Game over
                        const finalScore = score - (wrongAnswers * 2);
                        document.getElementById('final-score').textContent = finalScore;
                        document.getElementById('game-over-modal').classList.remove('hidden');
                    }
                }, 1000); // 1 second delay for better user experience
                
            } else {
                resultElement.textContent = "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! üòî ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.";
                resultElement.style.color = "red";
                wrongAnswers++;
                document.getElementById('wrong-answers-count').textContent = wrongAnswers;

                // Add wrong animation to the container
                document.getElementById('game-container').classList.add('wrong-animation');
                setTimeout(() => {
                    document.getElementById('game-container').classList.remove('wrong-animation');
                }, 500); // Animation duration
            }
        });

        // Load the first puzzle when the page is loaded.
        document.addEventListener('DOMContentLoaded', loadPuzzle);
    </script>

</body>
</html>
